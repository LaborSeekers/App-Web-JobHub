import{e as U}from"./chunk-EM422GXN.js";import{Ca as j,b as y,e as O,fa as x,h as P,i as M,l as w,o as N,p as F,q as I,r as A,s as D,t as k,u as L,v as T,ya as V,za as G}from"./chunk-3VUKCVAB.js";import{Ab as n,Bb as m,Fb as _,Ib as d,Kb as f,Rc as S,Sb as o,Tb as E,Za as u,_a as p,la as b,ob as g,qb as s,ta as v,ua as C,zb as t}from"./chunk-PY7A6XRR.js";function q(c,a){if(c&1){let l=_();t(0,"div",21),m(1,"input",22)(2,"input",23)(3,"textarea",24)(4,"input",25)(5,"input",26),t(6,"button",27),d("click",function(){let r=v(l).index,i=f();return C(i.eliminarExperiencia(r))}),o(7,"Eliminar Experiencia"),n()()}if(c&2){let l=a.index;s("formGroupName",l)}}function J(c,a){if(c&1&&(t(0,"option",32),o(1),n()),c&2){let l=a.$implicit;s("value",l.id),u(),E(l.name)}}function K(c,a){if(c&1){let l=_();t(0,"div",28),m(1,"input",29),t(2,"select",30),g(3,J,2,2,"option",31),n(),m(4,"input",25)(5,"input",26),t(6,"button",15),d("click",function(){let r=v(l).index,i=f();return C(i.eliminarEducacion(r))}),o(7,"Eliminar Educaci\xF3n"),n()()}if(c&2){let l=a.index,e=f();s("formGroupName",l),u(3),s("ngForOf",e.grados)}}function Q(c,a){if(c&1&&(t(0,"option",32),o(1),n()),c&2){let l=a.$implicit;s("value",l.id),u(),E(l.languageLevel)}}function W(c,a){if(c&1){let l=_();t(0,"div",33),m(1,"input",34),t(2,"select",35),g(3,Q,2,2,"option",31),n(),t(4,"button",15),d("click",function(){let r=v(l).index,i=f();return C(i.eliminarIdioma(r))}),o(5,"Eliminar Idioma"),n()()}if(c&2){let l=a.index,e=f();s("formGroupName",l),u(3),s("ngForOf",e.niveles)}}var R=(()=>{let a=class a{constructor(e,r,i){this.fb=e,this.postulantesService=r,this.AuthService=i,this.niveles=[],this.grados=[],this.curriculumForm=this.fb.group({nombre:[""],apellido:[""],telefono:[""],correo:[""],ubicacion:[""],acercaDe:[""],experienciaLaboral:this.fb.array([]),educacion:this.fb.array([]),habilidades:this.fb.array([]),idiomas:this.fb.array([])})}get experienciaLaboral(){return this.curriculumForm.get("experienciaLaboral")}get educacion(){return this.curriculumForm.get("educacion")}get habilidades(){return this.curriculumForm.get("habilidades")}get idiomas(){return this.curriculumForm.get("idiomas")}agregarExperiencia(){let e=this.fb.group({puesto:[""],empresa:[""],descripcion:[""],fechaInicio:[""],fechaFin:[""]});this.experienciaLaboral.push(e)}agregarEducacion(){let e=this.fb.group({institucion:[""],grado:[""],fechaInicio:[""],fechaFin:[""]});this.educacion.push(e)}agregarHabilidad(){let e=this.fb.control("");this.habilidades.push(e)}agregarIdioma(){let e=this.fb.group({idioma:[""],nivel:[""]});this.idiomas.push(e)}eliminarExperiencia(e){this.experienciaLaboral.removeAt(e)}eliminarEducacion(e){this.educacion.removeAt(e)}eliminarHabilidad(e){this.habilidades.removeAt(e)}eliminarIdioma(e){this.idiomas.removeAt(e)}ngOnInit(){this.postulantesService.getCurriculum(this.AuthService.getUserInfo().userRoleId).subscribe({next:e=>{this.curriculumForm.patchValue({nombre:this.AuthService.getUserInfo().firstName,telefono:this.AuthService.getUserInfo().phone,apellido:this.AuthService.getUserInfo().lastName,acercaDe:e.content||""}),this.experienciaLaboral.clear(),(e.workExperience||[]).forEach(r=>{this.experienciaLaboral.push(this.fb.group({puesto:r.positionName||"",empresa:r.companyName||"",descripcion:r.description||"",fechaInicio:r.startDate||"",fechaFin:r.endDate||""}))}),this.educacion.clear(),(e.education||[]).forEach(r=>{this.educacion.push(this.fb.group({institucion:r.institutionName||"",grado:r.eduLevel?.id||"",fechaInicio:r.startDate||"",fechaFin:r.endDate||""}))}),this.idiomas.clear(),(e.languages||[]).forEach(r=>{this.idiomas.push(this.fb.group({idioma:r.name||"",nivel:r.languageLevel?.id||""}))}),console.log("Formulario llenado exitosamente")},error:e=>{console.error("El usuario actualmente no tiene curriculum",e)}}),this.postulantesService.getLanguageLevels().subscribe({next:e=>{this.niveles=e},error:e=>{console.error("Error al obtener niveles de idioma",e)}}),this.postulantesService.getEducationLevels().subscribe({next:e=>{this.grados=e},error:e=>{console.error("Error al obtener niveles de Educacion",e)}})}onSubmit(){let e=this.curriculumForm.value,r={postulante:{id:+this.AuthService.getUserInfo().userRoleId},content:e.acercaDe,languages:e.idiomas.map(i=>({name:i.idioma,languageLevel:{id:+i.nivel}})),work_experience:e.experienciaLaboral.map(i=>({positionName:i.puesto,companyName:i.empresa,description:i.descripcion,startDate:i.fechaInicio,endDate:i.fechaFin})),education:e.educacion.map(i=>({institutionName:i.institucion,eduLevel:{id:+i.grado},startDate:i.fechaInicio,endDate:i.fechaFin}))};this.postulantesService.createCurriculum(r).subscribe({next:()=>{console.log("Curriculum guardado exitosamente")},error:i=>{console.error("Error al guardar curriculum",i)}})}};a.\u0275fac=function(r){return new(r||a)(p(T),p(U),p(y))},a.\u0275cmp=b({type:a,selectors:[["app-editar-curriculum"]],decls:44,vars:4,consts:[["mat-button","","mat-dialog-close",""],[1,"contenedor"],[3,"ngSubmit","formGroup"],[1,"centrado"],[1,"perfil"],["alt","Foto de Perfil","src","assets/imagenes/Entrevistas/perfil.png",1,"imagen-perfil"],[1,"perfil2"],["formControlName","nombre","type","text","placeholder","Ingrese su nombre"],["formControlName","apellido","type","text","placeholder","Ingrese su apellido"],[1,"container-derecho"],[1,"seccion"],[1,"seccion-titulo"],["formControlName","acercaDe","placeholder","Ingrese informaci\xF3n sobre usted",1,"input-texto"],["formArrayName","experienciaLaboral",1,"experiencia-laboral"],["class","experiencia-item",3,"formGroupName",4,"ngFor","ngForOf"],["type","button",3,"click"],["formArrayName","educacion",1,"educacion"],["class","educacion-item",3,"formGroupName",4,"ngFor","ngForOf"],["formArrayName","idiomas",1,"idiomas"],["class","idioma-item",3,"formGroupName",4,"ngFor","ngForOf"],["type","submit"],[1,"experiencia-item",3,"formGroupName"],["formControlName","puesto","type","text","placeholder","Nombre del puesto"],["formControlName","empresa","type","text","placeholder","Nombre de la empresa"],["formControlName","descripcion","placeholder","Descripci\xF3n"],["formControlName","fechaInicio","type","date","placeholder","Fecha de inicio"],["formControlName","fechaFin","type","date","placeholder","Fecha de fin"],["type","button",2,"margin-top","2%",3,"click"],[1,"educacion-item",3,"formGroupName"],["formControlName","institucion","type","text","placeholder","Instituci\xF3n"],["formControlName","grado","id","grado",1,"grado"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"idioma-item",3,"formGroupName"],["formControlName","idioma","type","text","placeholder","Idioma"],["formControlName","nivel","id","nivel",1,"nivel"]],template:function(r,i){r&1&&(t(0,"body")(1,"mat-dialog-actions")(2,"button",0),o(3,"X"),n()(),t(4,"div",1)(5,"form",2),d("ngSubmit",function(){return i.onSubmit()}),t(6,"div",3)(7,"div",4),m(8,"img",5),n(),t(9,"div",6)(10,"h3"),o(11,"Nombre"),n(),m(12,"input",7),t(13,"h3"),o(14,"Apellido"),n(),m(15,"input",8),n()(),t(16,"div",9)(17,"div",10)(18,"h3",11),o(19,"ACERCA DE"),n(),m(20,"textarea",12),n()(),t(21,"div",10)(22,"h3",11),o(23,"EXPERIENCIA LABORAL"),n(),t(24,"div",13),g(25,q,8,1,"div",14),t(26,"button",15),d("click",function(){return i.agregarExperiencia()}),o(27,"Agregar Experiencia"),n()()(),t(28,"div",10)(29,"h3",11),o(30,"EDUCACI\xD3N"),n(),t(31,"div",16),g(32,K,8,2,"div",17),t(33,"button",15),d("click",function(){return i.agregarEducacion()}),o(34,"Agregar Educaci\xF3n"),n()()(),t(35,"div",10)(36,"h3",11),o(37,"IDIOMAS"),n(),t(38,"div",18),g(39,W,6,2,"div",19),t(40,"button",15),d("click",function(){return i.agregarIdioma()}),o(41,"Agregar Idioma"),n()()(),t(42,"button",20),o(43,"Enviar Curriculum"),n()()()()),r&2&&(u(5),s("formGroup",i.curriculumForm),u(20),s("ngForOf",i.experienciaLaboral.controls),u(7),s("ngForOf",i.educacion.controls),u(7),s("ngForOf",i.idiomas.controls))},dependencies:[S,x,G,j,w,k,L,O,D,P,M,N,A,F,I],styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;color:#fff;background-color:#2e2e2e}.contenedor[_ngcontent-%COMP%]{max-width:800px;margin:auto;padding:20px;color:#000;background-color:#f9f9f9}.centrado[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.perfil[_ngcontent-%COMP%]{width:100px;height:100px;background-color:#00f;border-radius:50%}.perfil2[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1}.imagen-perfil[_ngcontent-%COMP%]{border-radius:50%;width:100%;height:100%;object-fit:cover}.titulo[_ngcontent-%COMP%], .subtitulo[_ngcontent-%COMP%]{font-size:15px;font-weight:solid;font-family:Epiloge}.input-texto[_ngcontent-%COMP%]{border:none;border-bottom:2px solid #ccc;padding:8px;margin-bottom:15px;width:100%}.input-texto[_ngcontent-%COMP%]:focus{outline:none;border-bottom-color:#555}.contenedores[_ngcontent-%COMP%]{display:flex;gap:20px}.container-izquierdo[_ngcontent-%COMP%], .container-derecho[_ngcontent-%COMP%]{flex:1}.contacto[_ngcontent-%COMP%], .seccion[_ngcontent-%COMP%]{margin-bottom:20px;text-align:center}.seccion-titulo[_ngcontent-%COMP%]{text-align:center}.seccion[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:400}.input-texto[_ngcontent-%COMP%]{width:100%;resize:none}.experiencia-item[_ngcontent-%COMP%]{margin:2%;display:flex}"]});let c=a;return c})();var B=".main-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:1rem;gap:1rem}@media (min-width: 768px){.main-container[_ngcontent-%COMP%]{flex-direction:row}}.templates-section[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:.5rem;padding:1rem;width:100%}@media (min-width: 768px){.templates-section[_ngcontent-%COMP%]{width:33%}}.section-title[_ngcontent-%COMP%]{text-align:center;font-weight:700}.templates-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:.5rem;margin-top:1rem}.template-image[_ngcontent-%COMP%]{border-radius:.5rem;width:100%;height:auto}.section-subtitle[_ngcontent-%COMP%]{text-align:center;margin-top:1rem}.color-options[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:.5rem;margin-top:.5rem}.color-swatch[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;border-radius:9999px}.color-swatch.blue[_ngcontent-%COMP%]{background-color:#007bff}.color-swatch.red[_ngcontent-%COMP%]{background-color:red}.color-swatch.green[_ngcontent-%COMP%]{background-color:#0f0}.color-swatch.yellow[_ngcontent-%COMP%]{background-color:#ff0}.color-swatch.gray[_ngcontent-%COMP%]{background-color:gray}.buttons-group[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem;margin-top:1rem}.cv-image-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%}@media (min-width: 768px){.cv-image-section[_ngcontent-%COMP%]{width:66%}}.cv-preview-image[_ngcontent-%COMP%]{width:100%;height:auto;max-width:600px;border-radius:.5rem}.cv-buttons-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem;margin-top:1rem}.actions-group[_ngcontent-%COMP%]{display:flex;gap:1rem}.btn-outline[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:.5rem;padding:.5rem 1rem}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border-radius:.5rem;padding:.5rem 1rem;border:none}.btn-danger[_ngcontent-%COMP%]{background-color:red;color:#fff;border-radius:.5rem;padding:.5rem 1rem;border:none}",re=(()=>{let a=class a{constructor(e){this.dialog=e}verDetalles(e){e.stopPropagation(),this.openDialog()}openDialog(){this.dialog.open(R,{width:"auto",maxHeight:"80vh"})}};a.\u0275fac=function(r){return new(r||a)(p(V))},a.\u0275cmp=b({type:a,selectors:[["app-crear-cv"]],decls:39,vars:0,consts:[["lang","es"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"main-container"],[1,"templates-section"],[1,"section-title"],[1,"templates-grid"],["src","assets/Cvs/Plantilla 1.png","alt","Template 1",1,"template-image"],["src","assets/Cvs/Plantilla 2.png","alt","Template 2",1,"template-image"],["src","assets/Cvs/Plantilla 3.png","alt","Template 3",1,"template-image"],["src","assets/Cvs/Plantilla 4.png","alt","Template 4",1,"template-image"],[1,"section-subtitle"],[1,"color-options"],[1,"color-swatch","blue"],[1,"color-swatch","red"],[1,"color-swatch","green"],[1,"color-swatch","yellow"],[1,"color-swatch","gray"],[1,"buttons-group"],[1,"btn-outline"],[1,"btn-primary"],[1,"cv-image-section"],["src","assets/Cvs/cv ejemplo.PNG","alt","CV Preview",1,"cv-preview-image"],[1,"cv-buttons-group"],["mat-raised-button","","color","primary",1,"btn-outline",3,"click"],[1,"actions-group"],[1,"btn-danger"]],template:function(r,i){r&1&&(t(0,"html",0)(1,"head"),m(2,"meta",1)(3,"meta",2),t(4,"title"),o(5,"Plataforma de Trabajo"),n()(),t(6,"body")(7,"div",3)(8,"div",4)(9,"h2",5),o(10,"PLANTILLAS"),n(),t(11,"div",6),m(12,"img",7)(13,"img",8)(14,"img",9)(15,"img",10),n(),t(16,"p",11),o(17," SELECCIONA UNO DE LOS COLORES DISPONIBLES PARA LA CREACI\xD3N DE TU CV "),n(),t(18,"div",12),m(19,"div",13)(20,"div",14)(21,"div",15)(22,"div",16)(23,"div",17),n(),t(24,"div",18)(25,"button",19),o(26,"Descargar CV"),n(),t(27,"button",20),o(28,"Imprimir CV"),n()()(),t(29,"div",21),m(30,"img",22),t(31,"div",23)(32,"button",24),d("click",function(z){return i.verDetalles(z)}),o(33," Editar CV"),n(),t(34,"div",25)(35,"button",20),o(36,"Guardar cambios"),n(),t(37,"button",26),o(38,"Salir"),n()()()()()()())},dependencies:[x],styles:[B,B]});let c=a;return c})();export{R as a,re as b};
